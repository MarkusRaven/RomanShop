(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f25beaba"],{cbc1:function(e,t,r){"use strict";r.r(t);var a=r("7a23"),n={class:"paypal__wrapper"},c={ref:"paypal"};function i(e,t,r,i,o,s){return Object(a["C"])(),Object(a["i"])("div",n,[Object(a["j"])("div",c,null,512)])}var o=r("5530"),s=r("ade3"),p=r("1da1"),d=(r("96cf"),r("a4d3"),r("e01a"),r("d81d"),r("b0c0"),r("e692")),u=r("5502"),l={data:function(){return{loaded:!1,paidFor:!1,product:{price:777999,description:"leg lamp from that one movie",img:"./assets/lamp.jpg"}}},mounted:function(){var e=document.createElement("script");e.src="https://www.paypal.com/sdk/js?client-id=AbLwrgEaPeiIpwmFu6rP9rexynquY7H3KT8CrYV2bEejAfhK_q6o31viE4Zr2rtS2mRNe0DNpzvmj339",e.addEventListener("load",this.setLoaded),document.body.appendChild(e),this.product.price=this.cart.final_price>0?this.cart.final_price:"200",console.log(this.product.price)},methods:{setLoaded:function(){var e=this;this.loaded=!0,window.paypal.Buttons({createOrder:function(t,r){return r.order.create({purchase_units:[{description:e.product.description,amount:{currency_code:"USD",value:e.product.price}}]})},onApprove:function(){var t=Object(p["a"])(regeneratorRuntime.mark((function t(r,a){var n,c,i,p,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.order.capture();case 2:if(n=t.sent,e.paidFor=!0,t.prev=4,!e.isLoggedIn){t.next=14;break}return c=e.$store.getters.cart.id,t.next=9,Object(d["Order"])({comment:"23312312321312312",paypal_id:n.id,cart:c,status:1});case 9:return t.next=11,e.$store.dispatch("loadCart");case 11:e.$router.push("/profile"),t.next=21;break;case 14:return i=e.cart.related_items.map((function(e){var t;return t={height:e.height,width:e.width,length:e.length,bohrung:e.bohrung,comment:"23312312321312312",qty_item:0,total_price:e.total_price,ausschnitt:e.ausschnitt,item:e.item.id,armierung:!0},Object(s["a"])(t,"ausschnitt",0),Object(s["a"])(t,"ausklinkung",0),Object(s["a"])(t,"polierte_kante",!0),t})),p=Object(o["a"])(Object(o["a"])({},e.$route.params),{},{paypal_id:n.id,email:n.payer.email_address,first_name:n.payer.name.given_name,last_name:n.payer.name.surname,total_items:e.cart.total_items,final_price:e.cart.final_price,cart_items:i}),t.next=18,Object(d["paypalOrder"])(p);case 18:u=t.sent,e.$store.dispatch("clearCart"),e.$router.push({name:"Thanks",params:{info:u.data.detail}});case 21:t.next=26;break;case 23:t.prev=23,t.t0=t["catch"](4),console.log(t.t0);case 26:console.log(n);case 27:case"end":return t.stop()}}),t,null,[[4,23]])})));function r(e,r){return t.apply(this,arguments)}return r}(),onError:function(e){console.log(e)}}).render(this.$refs.paypal)}},computed:Object(o["a"])({},Object(u["b"])(["cart","isLoggedIn"]))},m=r("d959"),h=r.n(m);const f=h()(l,[["render",i]]);t["default"]=f},d81d:function(e,t,r){"use strict";var a=r("23e7"),n=r("b727").map,c=r("1dde"),i=c("map");a({target:"Array",proto:!0,forced:!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-f25beaba.18a09ae0.js.map