{"version":3,"sources":["webpack:///./src/views/PayPal.vue","webpack:///./src/views/PayPal.vue?2e3f","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["class","ref","data","loaded","paidFor","product","price","description","img","mounted","script","document","createElement","src","addEventListener","this","setLoaded","body","appendChild","cart","final_price","console","log","methods","window","paypal","Buttons","createOrder","actions","order","create","purchase_units","amount","currency_code","value","onApprove","capture","isLoggedIn","cartId","$store","getters","id","comment","paypal_id","status","dispatch","$router","push","cartItems","related_items","map","item","height","width","length","bohrung","qty_item","total_price","ausschnitt","armierung","result","$route","params","email","payer","email_address","first_name","name","given_name","last_name","surname","total_items","cart_items","res","info","detail","onError","err","render","$refs","computed","__exports__","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"0IACOA,MAAM,mB,GACLC,IAAI,U,gDADV,eAEM,MAFN,EAEM,CADL,eAAwB,MAAxB,EAAwB,Y,oHASZ,GACbC,KAAM,iBAAO,CACXC,QAAQ,EACRC,SAAS,EACTC,QAAS,CACPC,MAAO,OACPC,YAAa,+BACbC,IAAK,uBAGTC,QAVa,WAWX,IAAMC,EAASC,SAASC,cAAc,UACtCF,EAAOG,IACL,2HACFH,EAAOI,iBAAiB,OAAQC,KAAKC,WACrCL,SAASM,KAAKC,YAAYR,GAC1BK,KAAKV,QAAQC,MAAQS,KAAKI,KAAKC,YAAc,EAAIL,KAAKI,KAAKC,YAAc,MACzEC,QAAQC,IAAIP,KAAKV,QAAQC,QAE3BiB,QAAS,CACPP,UAAW,WAAW,WACpBD,KAAKZ,QAAS,EACdqB,OAAOC,OACJC,QAAQ,CACPC,YAAa,SAACzB,EAAM0B,GAClB,OAAOA,EAAQC,MAAMC,OAAO,CAC1BC,eAAgB,CACd,CACExB,YAAa,EAAKF,QAAQE,YAC1ByB,OAAQ,CACNC,cAAe,MACfC,MAAO,EAAK7B,QAAQC,YAM9B6B,UAAW,WAAF,8CAAE,WAAOjC,EAAM0B,GAAb,+GACWA,EAAQC,MAAMO,UADzB,UACHP,EADG,OAET,EAAKzB,SAAU,EAFN,UAIJ,EAAKiC,WAJD,wBAKDC,EAAS,EAAKC,OAAOC,QAAQrB,KAAKsB,GALjC,SAMC,mBAAM,CACVC,QAAS,oBACTC,UAAWd,EAAMY,GACjBtB,KAAMmB,EACNM,OAAQ,IAVL,wBAYC,EAAKL,OAAOM,SAAS,YAZtB,QAaL,EAAKC,QAAQC,KAAK,YAbb,+BAeDC,EAAY,EAAK7B,KAAK8B,cAAcC,KAAI,SAAAC,GAAG,gBAC7CC,OAAQD,EAAKC,OACbC,MAAOF,EAAKE,MACZC,OAAQH,EAAKG,OACbC,QAASJ,EAAKI,QACdb,QAAS,oBACTc,SAAU,EACVC,YAAaN,EAAKM,YAClBC,WAAYP,EAAKO,WACjBP,KAAMA,EAAKA,KAAKV,GAChBkB,WAAW,GAVkC,8BAWjC,GAXiC,+BAYhC,GAZgC,mCAa7B,GAb6B,KAe3CC,EA9BC,iCA+BA,EAAKC,OAAOC,QA/BZ,IAgCHnB,UAAWd,EAAMY,GACjBsB,MAAOlC,EAAMmC,MAAMC,cACnBC,WAAYrC,EAAMmC,MAAMG,KAAKC,WAC7BC,UAAWxC,EAAMmC,MAAMG,KAAKG,QAC5BC,YAAa,EAAKpD,KAAKoD,YACvBnD,YAAa,EAAKD,KAAKC,YACvBoD,WAAYxB,IAtCT,UAwCW,yBAAYY,GAxCvB,QAwCDa,EAxCC,OAyCL,EAAKlC,OAAOM,SAAS,aACrB,EAAKC,QAAQC,KAAK,CAACoB,KAAM,SAAUL,OAAQ,CAACY,KAAMD,EAAIvE,KAAKyE,UA1CtD,6DA6CPtD,QAAQC,IAAR,MA7CO,QA+CTD,QAAQC,IAAIO,GA/CH,0DAAF,wDAAE,GAiDX+C,QAAS,SAAAC,GACPxD,QAAQC,IAAIuD,MAGfC,OAAO/D,KAAKgE,MAAMtD,UAGzBuD,SAAU,kBACL,eAAW,CAAC,OAAQ,iB,qBCpG3B,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASH,KAErD,gB,kCCNf,IAAII,EAAI,EAAQ,QACZC,EAAO,EAAQ,QAAgCjC,IAC/CkC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAKvDF,EAAE,CAAEI,OAAQ,QAASC,OAAO,EAAMC,QAASH,GAAuB,CAChEnC,IAAK,SAAauC,GAChB,OAAON,EAAKpE,KAAM0E,EAAYC,UAAUpC,OAAS,EAAIoC,UAAU,QAAKC","file":"js/chunk-f25beaba.18a09ae0.js","sourcesContent":["<template>\n  <div class=\"paypal__wrapper\">\n   <div ref=\"paypal\"></div>\n  </div>\n</template>\n\n<script>\nimport { paypalOrder, Order } from '@/api/shop'\nimport {mapGetters} from \"vuex\"\n\n\nexport default {\n  data: () => ({\n    loaded: false,\n    paidFor: false,\n    product: {\n      price: 777999,\n      description: \"leg lamp from that one movie\",\n      img: \"./assets/lamp.jpg\"\n    }\n  }),\n  mounted(){\n    const script = document.createElement(\"script\");\n    script.src =\n      \"https://www.paypal.com/sdk/js?client-id=AbLwrgEaPeiIpwmFu6rP9rexynquY7H3KT8CrYV2bEejAfhK_q6o31viE4Zr2rtS2mRNe0DNpzvmj339\";\n    script.addEventListener(\"load\", this.setLoaded);\n    document.body.appendChild(script);\n    this.product.price = this.cart.final_price > 0 ? this.cart.final_price : '200'\n    console.log(this.product.price)\n  },\n  methods: {\n    setLoaded: function() {\n      this.loaded = true;\n      window.paypal\n        .Buttons({\n          createOrder: (data, actions) => {\n            return actions.order.create({\n              purchase_units: [\n                {\n                  description: this.product.description,\n                  amount: {\n                    currency_code: \"USD\",\n                    value: this.product.price\n                  }\n                }\n              ]\n            });\n          },\n          onApprove: async (data, actions) => {\n            const order = await actions.order.capture();\n            this.paidFor = true;           \n            try{       \n              if(this.isLoggedIn){\n                let cartId = this.$store.getters.cart.id\n                await Order({\n                  comment: '23312312321312312',\n                  paypal_id: order.id,\n                  cart: cartId,\n                  status: 1\n                })\n                await this.$store.dispatch('loadCart')\n                this.$router.push('/profile')\n              }else{ \n                let cartItems = this.cart.related_items.map(item => ({\n                  height: item.height,\n                  width: item.width,\n                  length: item.length,\n                  bohrung: item.bohrung,\n                  comment: '23312312321312312',\n                  qty_item: 0,\n                  total_price: item.total_price,\n                  ausschnitt: item.ausschnitt,\n                  item: item.item.id,\n                  armierung: true,\n                  ausschnitt: 0,\n                  ausklinkung: 0,\n                  polierte_kante: true\n                }))\n                let result = {\n                  ...this.$route.params,\n                  paypal_id: order.id,\n                  email: order.payer.email_address,\n                  first_name: order.payer.name.given_name,\n                  last_name: order.payer.name.surname,\n                  total_items: this.cart.total_items,\n                  final_price: this.cart.final_price,\n                  cart_items: cartItems,\n                }\n                let res = await paypalOrder(result)\n                this.$store.dispatch('clearCart')\n                this.$router.push({name: 'Thanks', params: {info: res.data.detail}})       \n              }\n            }catch(err){\n              console.log(err)\n            }\n            console.log(order);\n          },\n          onError: err => {\n            console.log(err);\n          }\n        })\n        .render(this.$refs.paypal);\n    }\n  },\n  computed: {\n    ...mapGetters(['cart', 'isLoggedIn'])\n  }\n}\n</script>\n\n<style>\n\n</style>","import { render } from \"./PayPal.vue?vue&type=template&id=c2c1bf32\"\nimport script from \"./PayPal.vue?vue&type=script&lang=js\"\nexport * from \"./PayPal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/var/www/creategood.ru.net/RomanShop/client/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}